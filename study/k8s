
Windows PC (ì¸í„°ë„· ê°€ëŠ¥)
í•„ìš”í•œ K8s ë°”ì´ë„ˆë¦¬, rpm íŒ¨í‚¤ì§€, ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€, CNI yamlì„ ë‹¤ìš´ë¡œë“œ
USB/NAS ë“±ì„ í†µí•´ RHEL ì„œë²„ë¡œ ì „ë‹¬

RHEL ì„œë²„ (ì¸í„°ë„· ë¶ˆê°€)
Windowsì—ì„œ ì˜®ê¸´ íŒŒì¼ë“¤ë¡œ ë¡œì»¬ repo êµ¬ì„± + ì´ë¯¸ì§€ import + kubeadm init


####################################################################################################################################
ğŸ“Œ ìœˆë„ìš° PCì—ì„œ ì¤€ë¹„í•´ì•¼ í•  ê²ƒ
1. Kubernetes RPM íŒ¨í‚¤ì§€
ìœˆë„ìš°ëŠ” yum download ê°™ì€ ê±¸ ëª» ì“°ë‹ˆê¹Œ, ë³´í†µ 2ê°€ì§€ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤:
ë°©ë²• A: Kubernetes ê³µì‹ repo ì‚¬ì´íŠ¸ì—ì„œ rpm ì§ì ‘ ë‹¤ìš´ë¡œë“œ
ë°©ë²• B: Docker Desktop for Windows + rockylinux ì»¨í…Œì´ë„ˆ ë„ìš°ê³ , ê±°ê¸°ì„œ dnf download --resolveë¡œ rpm ëª¨ìœ¼ê¸°
ğŸ‘‰ ë°©ë²• Aê°€ ê°„ë‹¨í•˜ì§€ë§Œ, ì˜ì¡´ì„± íŒ¨í‚¤ì§€(runc, socat ë“±)ë„ ê°™ì´ ì±™ê²¨ì•¼ í•´ì„œ ë³´í†µ **ë°©ë²• B(ì»¨í…Œì´ë„ˆ ì•ˆì—ì„œ ë‹¤ìš´ë¡œë“œ)**ê°€ ë” í˜„ì‹¤ì ì´ì—ìš”.

2. Container Runtime (containerd)
containerd ê³µì‹ RPM íŒŒì¼ ë°›ì•„ì•¼ í•¨
containerd.io RPM ë‹¤ìš´ë¡œë“œ
(RHEL 8 ê³„ì—´ì´ë¼ë©´ containerd.io-*.el8.x86_64.rpm)

3. Kubernetes ì´ë¯¸ì§€
ìœˆë„ìš° PCì—ì„œëŠ” Docker Desktop ì„¤ì¹˜ í›„ ì´ë¯¸ì§€ pull â†’ tar export í•´ì„œ ì˜®ê¸°ë©´ ë©ë‹ˆë‹¤.
ì˜ˆ:
# Docker Desktop PowerShellì—ì„œ ì‹¤í–‰
$images = @(
 "registry.k8s.io/kube-apiserver:v1.30.3",
 "registry.k8s.io/kube-controller-manager:v1.30.3",
 "registry.k8s.io/kube-scheduler:v1.30.3",
 "registry.k8s.io/kube-proxy:v1.30.3",
 "registry.k8s.io/pause:3.9",
 "registry.k8s.io/etcd:3.5.9-0",
 "registry.k8s.io/coredns/coredns:v1.11.1"
)

foreach ($img in $images) {
  docker pull $img
  $tarName = $img.Replace("/", "_").Replace(":", "_") + ".tar"
  docker save $img -o $tarName
}

â†’ ì´ë ‡ê²Œ í•˜ë©´ .tar íŒŒì¼ì´ ìƒê¹ë‹ˆë‹¤.
â†’ USBë¡œ ì˜®ê²¨ì„œ RHELì—ì„œ ctr -n k8s.io images import XXX.tar ë¡œ ë¶ˆëŸ¬ì˜¤ë©´ ë©ë‹ˆë‹¤.

4. CNI í”ŒëŸ¬ê·¸ì¸
ì˜ˆ: flannel
Invoke-WebRequest -Uri https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml -

####################################################################################################################################

ğŸ“Œ RHEL ì„œë²„ì—ì„œ í•´ì•¼ í•  ê²ƒ (ì˜¤í”„ë¼ì¸ ì„¤ì¹˜)

ì˜®ê²¨ì˜¨ RPMìœ¼ë¡œ ë¡œì»¬ repo êµ¬ì„±

mkdir -p /opt/k8s/rpms
cp /media/usb/*.rpm /opt/k8s/rpms/

cat <<EOF | sudo tee /etc/yum.repos.d/k8s-local.repo
[k8s-local]
name=Kubernetes Offline Repo
baseurl=file:///opt/k8s/rpms
enabled=1
gpgcheck=0
EOF

sudo dnf clean all
sudo dnf makecache


íŒ¨í‚¤ì§€ ì„¤ì¹˜

sudo dnf install -y kubelet kubeadm kubectl containerd.io
sudo systemctl enable --now kubelet containerd


ì´ë¯¸ì§€ import

for img in /media/usb/*.tar; do
  ctr -n k8s.io images import $img
done


Master ì´ˆê¸°í™”

sudo kubeadm init --pod-network-cidr=10.244.0.0/16 --kubernetes-version=v1.30.3


CNI ì ìš©

kubectl apply -f kube-flannel.yml


âœ… ì´ë ‡ê²Œ í•˜ë©´ ìœˆë„ìš° PC(ì¸í„°ë„·) â†’ USB â†’ RHEL(íì‡„ë§) ê²½ë¡œë¡œ ì„¤ì¹˜ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

####################################################################################################################################


ì‚¬ì „ ì¤€ë¹„ (ì¸í„°ë„· ë˜ëŠ” PCì—ì„œ)
RHEL repo mirror (ë˜ëŠ” í•„ìš”í•œ rpm íŒ¨í‚¤ì§€ ë‹¤ìš´ë¡œë“œ)
Kubernetes ë°”ì´ë„ˆë¦¬ (kubeadm, kubelet, kubectl) rpm ë‹¤ìš´ë¡œë“œ
container runtime (containerd ë˜ëŠ” cri-o) rpm ë‹¤ìš´ë¡œë“œ
K8sê°€ í•„ìš”í•œ container image (kube-apiserver, kube-controller-manager, pause, etcd, coredns, CNI í”ŒëŸ¬ê·¸ì¸ ë“±)
ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ (flannel, calico ë“±) yaml íŒŒì¼

ë‚´ë¶€ë§ì—ì„œ
ìœ„ì—ì„œ ì˜®ê²¨ì˜¨ repo / rpm / ì´ë¯¸ì§€ / yamlì„ ì‚¬ìš©í•´ ì„¤ì¹˜
# 할일
fastAPI 에서 연결 추가 (신규 거래소)
코인마스터로 콤보박스 보이게 하고 선택했을 때 해당 코인의 차익률 보기
현선이 존재하는 거래소 여부 - 바이낸스, 바이비트, 쿠코인, OKX, MEXC 연결하기
거래소 추가에 대한 확장성


업비트 & 바이낸스 계좌 개설
계좌개설 - 바이낸스
KYC 인증
거래 화면 완료 - (코인별확인) 25/03/10 - 25/03/11
바이낸스 계좌개설 - 2025/03/10 완료
API 설치 및 연동


다른 코인 확인
다른 거래소 확인 - 국내간 빗썸..
삼각차익
현선차익



react + next.js


환율 수신 완료
시세 수신 완료 - 거래기회 확인


내가 거래를 완료할수 있는 소요시간 확인
소요시간동안 기회가 살아 있는지 확인..


수수료 확인 - 수수료를 감안한 계산법
먼저 리플(XRP) 전송을 하면,
- 업비트 → Binance 0.25 XRP
- 바이낸스 → Binance 0.2 XRP
수수료 엄청 싸게 이용할 수 있음 - 이거 진짜 개꿀팁임!
​
두번째는 USDT 전송하면서 트론 네트워크 쓰는거임.
- 업비트→ Binance 1 USDT
- 바이낸스→ Binance 1 USDT
이것도 저렴하게 이용할 수 있는 방법임ㅋㅋ

바이낸스는 BNB(바이낸스 코인)로 
수수료 내면 25% 할인해줌.
(수수료 많이 내는 분들은 꼭 BNB 좀 사두셈)
그리고 거래 금액 커져서 
VIP 레벨 올라가면 추가 할인도 있줌.
또 입출금 시간대도 영향있는데,
새벽에는 블록체인 네트워크가 한산해서
수수료 저렴해짐.
피크타임 피해서 거래하면 수수료 절약


업비트 이체 가능
바이낸스 이체 가능??
업비트 1일 이체 한도
바이낸스 1일 이체한도

업비트의 1일 원화 출금 한도는 5억 원이며, 1회 출금 한도는 1억 원입니다. 1일 입출금 한도는 매일 오전 0시에 초기화
바이낸스의 1일 송금 - 소액 송금은 하루에 2번까지만 가능, 3번 이상 소액 송금을 보내면 24시간 동안 송금이 동결

# Prompt
Node.js
리플을 이용해서 업비트, 바이낸스 간 차익거래 시스템을 만들려고해
코인 : XRP
예산은 100만원


# 로직
업비트, 바이낸스에서 XRP 가격 실시간 -> API(websocket)
USDT-KRW 환율 자동반영 -> how?
바이낸스 가격을 원화(KRW)로 변환
업비트, 바이낸스 간 차익률 계산
차익률 기준 3%
차익이 발생하면 
싼 거래소에서 코인 매수 
비싼 거래소로 코인 전송
ex. up -> bi : buy XRP/KRW @up -> tran XRP to bi -> sell XRP @ bi -> change USDT
ex. bi -> up : 50만원을 bi로 보낼때 어떻게 해야하는가.. 환전후 송금? 아니면 usdt를 구해서 보내?
               buy XRP/KRW @bi -> tran XRP to bi -> sell XRP @ bi -> change USDT

리밸런싱 - 송금수수료 절약 vs 거래스프레드(XRP or TRN -> USDT) 
🚀 만약 자주 리밸런싱해야 한다면 XRP로 보내는 방법이 유리할 수 있어!
ex. bi -> up : 
결론: 차익거래 후 어떻게 할까?
✅ 단기적으로 계속 차익거래를 반복할 계획이라면, USDT를 바이낸스에 보관
✅ 최종적으로 원화(KRW)로 가져오려면, USDT를 업비트나 빗썸으로 보내서 원화로 환전
✅ 업비트나 빗썸에서 USDT를 원화로 바꿀 때, 환전 스프레드와 출금 수수료를 고려해야 함

🚀 즉, 단기적으로는 바이낸스에서 XRP를 매도 후 USDT로 받는 것이 효율적이고, 
이후 USDT를 다시 원화로 환전할 계획을 세우는 것이 좋다!



차익실현기준 1% 지정가 매도
손절기준 -1.5% 시장가 매도


리밸런싱 - 송수신에서 TRX (트론)을 이용??


5초마다 반복 실행 - ??
자금 리밸런싱
- 한쪽이 75% 넘어갔을때
- 차익거래 수익 > 송금 비용
- 거래소 간 차익거래 기회가 일정 기간 동안 적어졌을 때


리밸런싱 방법
1. 바이낸스에서 리플 매수 -> 업비트로 리플 전송 -> 업비트 매도 -> 원화
원화(KRW) → BTC or ETH 구매 -> 바이낸스로 전송 -> USDT(달러 스테이블코인)로 변환 -> XRP/USDT 매수 가능




**네트워크 지연(500ms 예상)**을 감안하여, 초당 1~2번 정도 가격 업데이트
거래소 API 호출 제한을 고려하여 효율적으로 설계 필요


2️⃣ 국내 거래소(업비트/빗썸) 가격과 비교
업비트에서 XRP 가격이 800원이라고 가정하면,

차익률 = (800−792/792)×100=1.01%
✔ 차익률이 양수(+)이면 업비트가 더 비싸므로, 바이낸스에서 사서 업비트로 보내면 이익!
✔ 차익률이 음수(-)이면 바이낸스가 더 비싸므로, 업비트에서 사서 바이낸스로 보내는 게 이익!


# 환율
USDT/KRW 환율 → 업비트 API (USDT-KRW 마켓) 또는 외부 환율 API
실시간 환율을 API로 자동 반영
USDT-KRW 환율


# 공식
차익거래 공식:
USDT-KRW 환율값 가져오기
바이낸스 가격(KRW) = 바이낸스 가격(USDT) × USDT-KRW 환율
차익률(%) = ((업비트 가격(KRW) − 바이낸스 가격(KRW)) / 바이낸스 가격(KRW) ) × 100

바이낸스는 USDT(테더) 기반이므로, 바이낸스에서의 XRP 가격을 KRW로 변환해야 비교 가능
예제:
바이낸스에서 XRP 가격 = 0.6 USDT
현재 USDT-KRW 환율 = 1320원
바이낸스에서의 XRP 가격(KRW) = 0.6 × 1320 = 792원





✅ 개선할 수 있는 점 (선택 옵션)
💡 (1) 트레일링 스탑 추가 고려
만약 차익이 1%를 넘어간다면, 트레일링 스탑 -0.5% 적용
예: 1.5% 수익 달성 후, 다시 1.0%로 내려가면 익절

✅ 트레일링 스탑을 활용하는 방법 (수익 극대화)
만약 트레일링 스탑을 쓰고 싶다면, 고정 목표 수익(1.0%)을 먼저 도달한 후, 추가 상승을 노리는 방식으로 가는 게 좋아.

🚀 개선된 전략
1% 도달하면 바로 매도 X
이후 가격이 더 오르면 트레일링 스탑을 0.5%로 설정
예제:
1.5%까지 상승 → 1.0%로 내려가면 매도 (추가 수익 가능)
1.1%까지 올랐다가 0.5% 하락하면 0.6% 수익 실현 (조기 익절 위험)

✅ 결론
👉 지금 네 전략(고정 1% 익절, -1.5% 손절)이 차익거래에서는 더 안정적이야.
👉 트레일링 스탑을 활용하면 수익을 극대화할 수 있지만, 네트워크 지연과 변동성 때문에 오히려 손해 볼 가능성도 있음.
👉 따라서 트레일링 스탑 없이 고정 1% 익절이 더 유리해 보임.

📌 최종 결정: 현재 전략 유지! 🚀



💡 (2) 손절 속도 조정
-1.5% 손절을 시장가 매도가 아니라 지정가 매도로 실행할 수도 있음 (슬리피지 방지)
하지만 네트워크 속도가 느리다면 시장가 매도가 더 유리함


💡 (3) 거래량 확인
거래량이 적은 시간대에는 익절 / 손절 기준을 다르게 설정할 수도 있음
예: 유동성이 적을 때는 수익 실현을 1.2%까지 확장 가능




출금 속도 최적화

바이낸스 → 업비트 or 빗썸 출금 시간 고려
리플(XRP) 전송 속도 빠르므로 적합
🔹 거래소 API 속도 최적화

REST API 대신 WebSocket 사용 시 더 빠름
🔹 거래 수수료 고려

바이낸스: 0.1%
업비트/빗썸: 메이커/테이커 수수료 확인 후 조정 필요



# 손절 기준 (-1.5%)은 괜찮아? 조정 원해?
손절 기준을 정하는 주요 요소
거래소 간 전송 속도

리플(XRP) 전송: 보통 1~5분 이내 (빠름)
비트코인(BTC) 전송: 10~30분 (느림) → BTC는 차익거래에 부적합
거래소마다 입금 반영 시간 차이 있음
네트워크 지연 시간

코인 가격이 빠르게 변동되면 거래소 간 가격 차이가 줄어들 수도 있음
네트워크 지연(500ms 예상) 때문에 빠른 반응이 필요
거래소 수수료

바이낸스: 0.1%
업비트/빗썸: 메이커/테이커 수수료 다름
출금 수수료도 고려해야 함
시장 변동성

가격 변동이 크면 손절폭을 더 넓게 잡아야 함
변동성이 낮다면 더 좁게 설정 가능


 손절 기준을 정하는 방법
1️⃣ 고정 손절 기준 (-1.5% ~ -3%)
차익거래 손실이 -1.5% 이하일 때 자동 손절
안전한 손절: -1.5%
위험 감수 가능: -2% ~ -3%
✅ 장점: 간단하고 빠른 대응 가능
❌ 단점: 순간적인 변동으로 손절될 위험 있음

2️⃣ 변동성 기반 손절 (ATR 활용)
최근 변동성(ATR) 기준으로 손절 설정
손절 = 평균 변동성 * 2배
변동성이 높을 때는 손절폭을 크게, 낮을 때는 좁게 조절
✅ 장점: 시장 상황에 따라 자동 조정
❌ 단점: 구현이 조금 복잡함

3️⃣ 타임아웃 손절 (시간 기반)
거래 후 5~10분 안에 차익 실현이 안 되면 자동 손절
가격 변동이 예상보다 적을 때 장기 보유 리스크 방지
✅ 장점: 시장이 안정될 때까지 기다릴 수 있음
❌ 단점: 손실이 커질 수도 있음

🔹 추천 손절 전략
✅ 가장 현실적인 전략:

기본 손절 -1.5% 설정
변동성이 크면 -2% ~ -3%까지 확대
거래 후 10분 내 차익 실현 안 되면 자동 손절

🚀 결론
소규모 예산(100만 원)에서는 -1.5% 손절 추천
시장 변동성이 크면 -2% ~ -3%까지 허용 가능
거래 후 10분 내 차익 실현 안 되면 자동 손절
장기 보유 리스크를 막기 위해 타임아웃 손절 추가



# 수익 실현 기준도 넣을까? (예: 차익률 1% 이상일 때 익절)
🚀 수익 실현 기준을 정하는 주요 요소
거래소 간 가격 차이

일반적으로 0.3% ~ 1% 차이가 발생
수익률이 1% 이상이면 확정 매도 추천
거래소 수수료 고려

매매 수수료 + 출금 수수료 포함
업비트/빗썸은 KRW 출금이 어렵기 때문에 코인 출금 방식 사용
시장 변동성

변동성이 크면 목표 수익률을 더 크게 설정
변동성이 낮다면 빨리 익절하는 게 유리
🔹 수익 실현(익절) 기준 3가지
1️⃣ 고정 목표 수익률 (0.8% ~ 1.5%)
목표 수익률: 0.8% ~ 1.5% 달성 시 자동 매도
안전한 익절: +0.8%
위험 감수 가능: +1.2% ~ 1.5%
✅ 장점: 간단하고 빠르게 수익 실현
❌ 단점: 가격이 더 오를 가능성이 있어도 조기 매도됨

2️⃣ 변동성 기반 목표 수익률 (ATR 활용)
최근 변동성을 고려하여 자동으로 목표 수익률 조정
평균 변동폭(ATR) * 2배 → 수익 목표 설정
예를 들어, 최근 변동폭이 0.5%라면 목표 수익률을 1.0%로 설정
✅ 장점: 시장 상황에 따라 최적의 익절 가능
❌ 단점: 변동성 분석 필요 (조금 더 복잡)

3️⃣ 트레일링 스탑 (Trailing Stop, 상승 보장)
목표 수익률에 도달한 후, 일정 비율(예: -0.5%) 하락 시 자동 익절
예를 들어,
+1.5% 도달 → 이후 -0.5% 하락하면 자동 매도
최대 수익을 노리면서 하락 리스크 방지
✅ 장점: 더 큰 수익을 노릴 수 있음
❌ 단점: 변동성이 클 경우 너무 일찍 익절될 수도 있음

📌 추천 전략
기본 전략:

목표 수익률 0.8% ~ 1.2% 도달 시 자동 익절
변동성이 크면 1.5%까지 확장 가능
보수적 전략:

목표 수익률 0.8%
트레일링 스탑 -0.5% 설정
공격적 전략:

목표 수익률 1.5%
트레일링 스탑 -1.0% 설정


🚀 결론
소규모 예산(100만 원)에서는 1.0% 수익 실현 추천
변동성이 크면 1.5%까지 익절 목표 확장 가능
트레일링 스탑을 사용하면 더 큰 수익 기회 가능
장기 보유 리스크를 막기 위해 10분 타임아웃 추가 가능



# 선조건
KYC 인증 : 절차 확인
처음 출금 시 24~48시간 대기 시간 존재여부 - 미리 출금한번 해둘것.

# 주의사항
다중 계정 운영 의심 (업비트, 빗썸) - 같은 사람이 여러 개의 계정을 운영하면 불법 차익거래로 간주되어 동결될 가능성 있음
KYC 인증을 미리 완료 (최대 출금 한도 확보)
대량 출금 전에 소액 테스트 출금 (출금 제한 확인)
IP 변경 시 VPN 사용 자제 (해킹 의심 방지)
동일 거래소 간 잦은 입출금 피하기 (자금세탁 의심 가능)
출금할 때 항상 거래소 공지 확인 (출금 중단 여부 체크)


# 계좌수
최종 추천 (100만원 예산 기준)
✅ 업비트 1개 + 바이낸스 1개 (총 2개) → 최소 계좌 수로 운영
✅ 출금 지연 대비 & 리스크 관리 원하면 바이낸스 2개 (총 3개)
✅ 자본이 커지면 출금 제한 대비 각 거래소 2개씩 (총 4개 이상) 추천


# 거래소 간 차익거래 (Inter-Exchange Arbitrage)
여러 거래소 가격 비교 후 싼 곳에서 사고 비싼 곳에서 판매
거래소 간 입출금 속도가 중요 → 자동화 필요


# 기술 스택
Node.js + ccxt: 거래소 API를 쉽게 연동 가능
REST API를 활용해 주문 실행
WebSocket: 실시간 시세 감지 (REST API보다 빠름)
Redis DB: 가격 데이터 캐싱 (빠른 연산 가능)
Redis / Kafka: 빠른 데이터 처리
PostgreSQL / MongoDB: 거래 기록 저장
Docker & Kubernetes: 봇을 컨테이너화하여 서버 관리
Python (보조 분석용): 데이터 분석, 기회 탐색


# 자동화 및 실행 환경
운영 환경: VPS + 백테스트 후 실전 배포
VPS (AWS, Linode, DigitalOcean): 24시간 봇 운영
로컬 개발 후 클라우드 배포
백테스트: 과거 데이터로 전략 검증 (Backtrader, ccxt 라이브러리 활용 가능)


# 거래소
API 지원 거래소: Upbit, 빗썸, Binance, Bybit, OKX 등
추천: Binance, OKX (API 속도 빠르고 거래량 많음)


# 출금제한 거래소

1. 업비트 (Upbit)
출금 한도: 1일 최대 50억 원
참고: 업비트의 가상화폐 출금 한도는 1일 최대 50억 원입니다. 

2. 빗썸 (Bithumb)
출금 한도: 가상화폐 종류별로 상이하며, 예를 들어 **테더(USDT)**의 경우 1일 최대 750,000 USDT (약 10.8억 원)
참고: 빗썸의 가상화폐 출금 한도는 코인 종류에 따라 다르며, 테더(USDT)의 경우 1일 최대 750,000 USDT입니다. 

3. 바이낸스 (Binance)
출금 한도: 계정 인증 수준에 따라 다르며, KYC(고객 신원 확인) 인증을 완료하면 더 높은 출금 한도를 이용할 수 있습니다.
참고: 바이낸스의 출금 한도는 계정 인증 수준에 따라 다르며, KYC 인증을 완료하면 더 높은 출금 한도를 이용할 수 있습니다. 

주의사항:
계정 인증 필수: 거래소마다 신원 인증(KYC) 수준에 따라 출금 한도가 다르므로, 최대 한도를 이용하려면 신원 인증을 완료해야 합니다.
정책 변경 가능성: 거래소의 정책은 변경될 수 있으므로, 최신 정보를 확인하기 위해 각 거래소의 공식 웹사이트를 참고하시기 바랍니다.



# 대상 코인
XRP, XLM, TRX 중에서 선택

추천 코인 & 이유
XRP (리플)
송금 속도: 3~5초 (빠름)
수수료: 0.0002 XRP (거의 무료)
여러 거래소에서 지원 (업비트, 빗썸, 바이낸스 등)
단점: 일부 거래소에서 출금 제한이 있을 수 있음

XLM (스텔라 루멘)
송금 속도: 2~5초
수수료: 0.00001 XLM (매우 저렴)
바이낸스, 업비트, OKX 등에서 사용 가능
단점: 거래량이 많지 않으면 슬리피지 발생 가능

TRX (트론)
송금 속도: 3~5초
수수료: 거의 무료
바이낸스, MEXC, OKX, KuCoin 등에서 수수료 없이 전송 가능
단점: 한국 원화 거래소에서 지원이 적음


# 고려할 점


# 리스크 관리
수수료 & 슬리피지 고려
자본 배분 (분산 투자)
자동 손절 기능 추가


거래소 출금 제한: 하루 출금 한도 확인 필요
자금 동결 위험: 거래소 간 대량 송금 시 KYC 강화로 출금 지연 가능


# 자본 규모
✅ 소규모 자본 (~5,000만 원 이하)
1,000만 원 이하 → 삼각 차익거래, 시장 내 차익거래
1,000만~5,000만 원 → 거래소 간 차익거래 가능하지만, 출금 제한과 수수료 고려 필요


1,000만 원으로 하루 0.2% 차익거래 = 하루 2만 원
월 20일 거래 시 월 40만 원 수익


송금할 때 코인 전송 수수료(네트워크 수수료) 발생
**빠른 송금이 가능한 코인 (XRP, XLM, TRX 등)**을 써야 함
거래소 간 송금 속도가 느리면 가격 차이가 사라질 가능성 있음


출금 한도 제한
업비트, 빗썸 같은 원화 거래소는 하루 출금 한도가 있음
바이낸스 같은 해외 거래소도 KYC(신원 인증) 단계별 한도가 다름
고정 비용 부담



거래소마다 입출금 수수료가 존재 (예: 업비트 USDT 출금 수수료 10 USDT)
소액이면 수익 대비 수수료 비율이 높아져서 비효율적
✅ 결론: 천만 원으로 거래소 간 차익거래 가능?
가능하지만, 최적화 필요!

소액 차익거래를 최적화하려면?
송금 속도가 빠른 코인 사용 (XRP, XLM, TRX)
수수료가 낮은 거래소 선택 (MEXC, OKX 등)
출금 한도 & KYC 확인 후 운영
천만 원 규모에서는 거래소 간 차익거래가 가능하지만, 수수료와 출금 속도를 최적화하지 않으면 수익률이 낮아질 수 있음.

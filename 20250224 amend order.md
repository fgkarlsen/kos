통합 10호가 생성순서

1. 정정/취소의 경우 원주문 정보 반영        - UptOrgOrdInfo
1.1. rebuild
1.1.1. 모든 거래소의 잔량이 0개인 호가 제거 - ShftMrgQuote
1.1.2. 최우선호가 update                  - Set BBO
1.2. 예외. 중간가 고려대상 아님
1.2.1. KRX : 시장가가 Making 되었다는건 상대방향에 잔량이 없다는 것으로 중간가격 형성 불가
1.2.2. NXT : 시장가 + FAS 없음
2. 통합10호가의 중간가격 Mix
3. 예상체결가능수량/비용 계산               - CalcImmExecQty

[정정] 원호가 수량 제외 
최우선, 최유리 => 원호가의 호가가 없음 => 없는 상태로 진행 (어느 호가에 잔량이 남았는지 알 수 없음)
시장가 => 자기 방향 1호가에서 빼기 (NXT는 시장가가 making 될 수 없음)
중간가 => 정정 불가 => KRX/NXT 모두 정정 주문 접수 불가

[취소] 원호가 수량 제외
최우선, 최유리 => 원호가의 호가가 없음 => 없는 상태로 진행 (어느 호가에 잔량이 남았는지 알 수 없음)
시장가 => 자기 방향 1호가에서 빼기 (NXT는 시장가가 making 될 수 없음)
중간가 => 자신의 거래소의 중간가 수량 빼기

[취소] 기준가 선정
최우선, 최유리 => 원호가의 호가를 알 수 없음 => 현재가로 진행
시장가 => 상/하한가
중간가 => 자신의 거래소의 중간가격

정정 시, 원호가 수량 제외 후 모든 거래소의 잔량이 0인 호가Level이 남는 현상
=> 51번 rule의 shift 함수를 재활용

정정/취소 원호가 수량 제외 or 51번 rule 이후의 호가판 재생성에 따라 최우선호가 변동 적용 
=> 중요) 중간가가 최우선호가가 될 수 X

[input valid 수정] 중간가 정정 불가 (F254)

첫 시세판 만들 때
1) 정정/취소의 경우 원주문 잔량 제거 (신규 pass)
2) 호가판 shift (신규 pass)
3) 최우선호가 변경 (신규 pass)
4) 중간가 추가 (신규 pass)
5) 예상체결가능수량/비용 계산

신규로 매수 주문을 1000원에 100주 지정가로 냈어.
내 주문이 매수1호가에 들어갔어.
이때 매수 1호가는 1000원이고 잔량이 100주야.
전부 내가 낸 주문인거야.
이때 이 주문을 100주 최우선지정가로 정정을 했어.

